(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-editpersonal-index"],{"0391":function(e,n,a){"use strict";a("6a54");var t=a("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t(a("d814")),o={data:function(){return{cdnUrl:"",avatar:"",nickname:"",username:"",examinationTypeArray:["男","女"],examinationTypeIndex:0,examinationTypeArrayType:"",phone:"",number:2,flag:!1,date:"2023-01-01",items:[{name:"男",value:"man"},{name:"女",value:"woman"}],current:1,gender:"woman"}},onLoad:function(){var e=this;uni.getStorage({key:"personal",success:function(n){console.log(n.data),e.cdnUrl=n.data.avatar,e.nickname=n.data.name,e.phone=n.data.phone,e.avatar=n.data.avatarId,"man"==n.data.gender?(e.current=0,e.gender="man"):(e.current=1,e.gender="woman"),""!=n.data.birth&&null!=n.data.birth?e.date=n.data.birth:e.date="2023-01-01"}})},methods:{bindDateChange:function(e){this.date=e.detail.value},saveinfo:function(){if(""==this.cdnUrl||null==this.cdnUrl)uni.showModal({title:"提示",content:"请上传头像",showCancel:!1,success:function(e){e.confirm&&console.log("用户点击确定")}});else if(""==this.nickname||null==this.nickname)uni.showModal({title:"提示",content:"请输入您的昵称",showCancel:!1,success:function(e){e.confirm&&console.log("用户点击确定")}});else{var e={avatarId:this.avatar,name:this.nickname,gender:this.gender,birth:this.date};console.log(e),(0,i.default)({url:"front/me",method:"patch",data:e}).then((function(e){console.log(e),uni.setStorage({key:"personal",data:e,success:function(){wx.showToast({title:"修改成功",icon:"success",duration:3e3}),setTimeout((function(){uni.reLaunch({url:"/pages/personal/index"})}),1e3)}})}))}},upload_file:function(e){var n=uni.getStorageSync("token");wx.showLoading({title:"上传中"});var a=this;wx.uploadFile({url:"".concat(this.$apiBaseUrl,"front/upload/avatar"),filePath:e,name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+n.token},success:function(e){var n=e.data;if(n=JSON.parse(n),console.log("图片",n),"200"==n.statusCode){var t=n,i=t.data;a.avatar=i.id,wx.hideLoading(),wx.showToast({title:"上传成功",icon:"success",duration:3e3})}else wx.hideLoading(),wx.showToast({title:"上传失败",icon:"none",duration:3e3})},fail:function(e){wx.hideLoading(),wx.showToast({title:"上传失败",icon:"none",duration:3e3})}})},radioChange:function(e){console.log(e.detail.value),this.gender=e.detail.value},getUserinfo:function(){var e=this;userinfo().then((function(n){var a=n.data;e.cdnUrl=a.avatar,e.nickname=a.nickname,e.username=a.realname,e.phone=a.mobile,e.examinationTypeIndex=a.gender}))},onChooseAvatar:function(e){console.log(e);var n=e.detail;this.upload_file(n.avatarUrl),this.cdnUrl=n.avatarUrl,console.log("头像啊啊啊",this.cdnUrl)},onName:function(e){console.log(e);var n=e.detail;this.username=n.value},change:function(e){console.log("e:",e)},examinationType:function(e){this.examinationTypeIndex=e.target.value,this.examinationTypeArrayType=this.examinationTypeArray[this.examinationTypeIndex]},changenumber:function(){this.number=1,this.flag=!0},onPhone:function(e){console.log(e);var n=e.detail;this.phone=n.value}}};n.default=o},"0e32":function(e,n,a){"use strict";var t=a("3371"),i=a.n(t);i.a},3371:function(e,n,a){var t=a("f8b4");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var i=a("967d").default;i("90b2542e",t,!0,{sourceMap:!1,shadowMode:!1})},"6f07":function(e,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return o})),a.d(n,"a",(function(){return t}));var t={uniIcons:a("39f9").default},i=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("v-uni-view",{staticClass:"userinfo"},[a("v-uni-view",{staticClass:"form"},[a("v-uni-button",{staticClass:"avatar-wrap",staticStyle:{border:"0px solid #fff",background:"none"},attrs:{"open-type":"chooseAvatar"},on:{chooseavatar:function(n){arguments[0]=n=e.$handleEvent(n),e.onChooseAvatar.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"ipt"},[a("v-uni-image",{staticClass:"avatar",attrs:{src:e.cdnUrl||"https://video-1349314223.cos.ap-nanjing.myqcloud.com/image/%E4%B8%8B%E8%BD%BD.jfif"}})],1)],1),a("v-uni-view",{staticClass:"label",staticStyle:{"text-align":"center","font-size":"28rpx"}},[e._v("更换头像")])],1),a("v-uni-view",{staticClass:"info_nickname"},[a("v-uni-view",{staticClass:"nickname_left"},[e._v("昵称")]),a("v-uni-view",{staticClass:"nickname_right"},[a("v-uni-input",{attrs:{placeholder:"请输入您的昵称"},model:{value:e.nickname,callback:function(n){e.nickname=n},expression:"nickname"}})],1)],1),a("v-uni-view",{staticClass:"info_nickname"},[a("v-uni-view",{staticClass:"nickname_left"},[e._v("性别")]),a("v-uni-view",{staticClass:"nickname_right gender"},[a("v-uni-view",{staticClass:"uni-list"},[a("v-uni-radio-group",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.radioChange.apply(void 0,arguments)}}},e._l(e.items,(function(n,t){return a("v-uni-label",{key:n.value,staticClass:"uni-list-cell uni-list-cell-pd",staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-left":"20rpx"}},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:n.value,checked:t===e.current}})],1),a("v-uni-view",[e._v(e._s(n.name))])],1)})),1)],1)],1)],1),a("v-uni-view",{staticClass:"info_nickname"},[a("v-uni-view",{staticClass:"nickname_left"},[e._v("生日")]),a("v-uni-view",{staticClass:"nickname_right gender"},[a("v-uni-picker",{attrs:{mode:"date",value:e.date},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.date))])],1),a("uni-icons",{staticClass:"arrow-right",staticStyle:{"margin-top":"5rpx"},attrs:{type:"right",size:"20"}})],1)],1),a("v-uni-view",{staticClass:"info_nickname"},[a("v-uni-view",{staticClass:"nickname_left"},[e._v("手机号")]),a("v-uni-view",{staticClass:"nickname_right"},[a("v-uni-view",{staticClass:"showphone"},[e._v(e._s(e.phone))])],1)],1),a("v-uni-view",{staticClass:"btn-wrap"},[a("v-uni-button",{staticClass:"btn",attrs:{type:"warn"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.saveinfo.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)},o=[]},"777b":function(e,n,a){"use strict";a.r(n);var t=a("6f07"),i=a("9f34");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(n,e,(function(){return i[e]}))}(o);a("0e32");var r=a("828b"),s=Object(r["a"])(i["default"],t["b"],t["c"],!1,null,"6c4e0e6a",null,!1,t["a"],void 0);n["default"]=s.exports},"9f34":function(e,n,a){"use strict";a.r(n);var t=a("0391"),i=a.n(t);for(var o in t)["default"].indexOf(o)<0&&function(e){a.d(n,e,(function(){return t[e]}))}(o);n["default"]=i.a},f8b4:function(e,n,a){var t=a("c86c");n=t(!1),n.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 需要放到文件最上面 */\n/* 水平间距 */\n/* 水平间距 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-6c4e0e6a]{width:100%;height:100%;background-image:url(https://video-1349314223.cos.ap-nanjing.myqcloud.com/image/%E4%B8%8B%E8%BD%BD.png);background-repeat:no-repeat}body.?%PAGE?%[data-v-6c4e0e6a]{background-image:url(https://video-1349314223.cos.ap-nanjing.myqcloud.com/image/%E4%B8%8B%E8%BD%BD.png);background-repeat:no-repeat}\n/* 未选中时 */[data-v-6c4e0e6a]:deep(uni-radio .wx-radio-input){border-radius:50%;width:%?30?%;height:%?30?%}\n/* 隐藏背景颜色，修改盒子为怪异盒模型 */[data-v-6c4e0e6a]:deep(uni-radio .wx-radio-input.wx-radio-input-checked){background:none!important;box-sizing:border-box;border:%?8?% solid #3c7bed!important}\n/* 隐藏选择后的打勾 */[data-v-6c4e0e6a]:deep(uni-radio .wx-radio-input.wx-radio-input-checked::before){display:none!important}[data-v-6c4e0e6a]:deep(uni-button:after){border:none}[data-v-6c4e0e6a]:deep(wx-button:after){border:none}[data-v-6c4e0e6a]:deep(wx-button){background-color:none}.userinfo[data-v-6c4e0e6a]{width:95%;margin:0 auto;font-size:%?34?%;font-weight:400;color:#333;height:100%;position:relative}.userinfo .form[data-v-6c4e0e6a]{border:none;border-radius:%?16?%;width:95%;margin:%?0?% auto;margin-top:%?40?%}.userinfo .avatar-wrap[data-v-6c4e0e6a]{border:none;height:%?158?%;display:flex;align-items:center;justify-content:space-between;padding:0 %?32?%;border-radius:%?16?%}.userinfo .avatar-wrap .avatar[data-v-6c4e0e6a]{width:%?128?%;height:%?128?%;margin-right:%?10?%;border-radius:50%}.userinfo .avatar-wrap .ipt[data-v-6c4e0e6a]{display:flex;align-items:center;margin:0 auto}.userinfo .avatar-wrap uni-image[data-v-6c4e0e6a]{width:%?118?%;height:%?118?%}.userinfo uni-button[open-type=chooseAvatar][data-v-6c4e0e6a]{border:none}.userinfo .info_nickname[data-v-6c4e0e6a]{margin:%?20?% auto;height:%?112?%;background:#fff;border-radius:%?16?% %?16?% %?16?% %?16?%;display:flex;align-items:center;justify-content:space-between;padding:0 %?32?%;width:87%;font-size:%?30?%}.userinfo .info_nickname .nickname_right uni-input[data-v-6c4e0e6a]{text-align:right}.userinfo .info_nickname .gender[data-v-6c4e0e6a]{display:flex;align-items:center;justify-content:center}.userinfo .btn-wrap[data-v-6c4e0e6a]{width:100%;text-align:center;margin-top:%?50?%}.userinfo .btn-wrap .btn[data-v-6c4e0e6a]{width:%?690?%;height:%?88?%;background:#3c7bed;border-radius:%?50?%}',""]),e.exports=n}}]);